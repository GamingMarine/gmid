//Not gonna lie, this was probably the hardest weapon I've ever had to code. Guess this is what spending 400 lines of code
//on one weapon can get you...
actor RevX : Weapon
{
	Weapon.BobRangeX 0.3
	Weapon.BobRangeY 0.5
	Weapon.BobStyle InverseSmooth
	Weapon.BobSpeed 2.0
    Weapon.SlotNumber 3
    Weapon.SelectionOrder 100
    Weapon.AmmoGive 100
    Weapon.AmmoType "RevXAmmo"
	Weapon.AmmoUse 1
	Obituary "%o got a load of %k's Rev-X."
	Tag "Rev-X"
    Inventory.Pickupmessage "You got the ''Rev-X'' Battery-Charged Rifle! Generation X is in effect! \cf(\cjSlot 3\cf)"
    Weapon.upsound "REVXUP"
	+WEAPON.AMMO_OPTIONAL
    Scale 0.75
    States
    {
      Spawn:
        RIFL A -1
        Stop
	Ready:
		RFL1 A 0 A_JumpIfInventory("RevXUpgrade1", 1, "CoolantReady")
		RFL1 A 0 A_JumpIfInventory("RevXUpgrade2", 1, "BarrelReady")
		RFL1 A 0 A_GiveInventory("RevXAmmo", 1)
		RFL1 A 5 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("BotAttack", 1, "Fire")
		Loop
	CoolantReady:
		RFL2 A 0 A_JumpIfInventory("RevXUpgrade2", 1, "SuperReady")
		RFL2 A 0 A_GiveInventory("RevXAmmo", 1)
		RFL2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("BotAttack", 1, "Fire")
		Loop
	BarrelReady:
		RFL3 A 0 A_JumpIfInventory("RevXUpgrade1", 1, "SuperReady")
		RFL3 A 0 A_GiveInventory("RevXAmmo", 1)
		RFL3 A 5 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("BotAttack", 1, "Fire")
		Loop
	SuperReady:
		RFL4 A 0 A_GiveInventory("RevXAmmo", 1)
		RFL4 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("BotAttack", 1, "Fire")
		Loop
	Select:
		RFL1 A 1 A_Raise
		RIF1 A 0 A_Raise
		Loop
	Deselect:
		RFL1 A 1 A_Lower
		TFL1 A 0 A_Lower
		Loop
	Fire:
		RFL1 C 0 A_JumpIfInventory("RevXUpgrade1", 1, "CoolantFire")
		RFL1 C 0 A_JumpIfInventory("RevXUpgrade2", 1, "BarrelFire")
		RFL1 C 0 A_JumpIfInventory("RevXAmmo", 50, "FireNormal")
		RFL1 C 0 A_JumpIfInventory("RevXAmmo", 25, "FireHalf")
		RFL1 C 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire1")
	    RFL1 C 0 A_SetPitch(pitch-0.50)
		RFL1 C 0 A_FireCustomMissile("RevXProjectileQuarter",0,1,8)
		RFL1 C 1 Bright A_Light1
		RFL1 B 0 A_SetPitch(pitch+0.50)
		RFL1 B 1 A_Light0
		RFL1 A 2
		RFL1 A 0 A_ReFire
		Goto Ready
	FireHalf:
		RFL1 C 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire1Half")
	    RFL1 C 0 A_SetPitch(pitch-0.50)
		RFL1 C 0 A_FireCustomMissile("RevXProjectileHalf",0,1,8)
		RFL1 C 1 Bright A_Light1
		RFL1 B 0 A_SetPitch(pitch+0.50)
		RFL1 B 1 A_Light0
		RFL1 A 1
		RFL1 A 0 A_ReFire
		Goto Ready
	FireNormal:
		RFL1 C 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire1Normal")
	    RFL1 C 0 A_SetPitch(pitch-0.50)
		RFL1 C 0 A_FireCustomMissile("RevXProjectile",0,1,8)
		RFL1 C 1 Bright A_Light1
		RFL1 B 0 A_SetPitch(pitch+0.50)
		RFL1 B 1 A_Light0
		RFL1 A 0 A_ReFire
		Goto Ready
	QuadFire1:
		TNT1 A 0 A_SetBlend("Blue", 0.50, 16)
		RFL1 C 0 A_PlaySound("QuadDamage/Use")
	    RFL1 C 0 A_SetPitch(pitch-0.50)
		RFL1 C 0 A_FireCustomMissile("RevXProjectileQuarter",0,1,8)
		RFL1 C 1 Bright A_Light1
		RFL1 B 0 A_SetPitch(pitch+0.50)
		RFL1 B 1 A_Light0
		RFL1 A 2
		RFL1 A 0 A_ReFire
		Goto Ready
	QuadFire1Half:
		TNT1 A 0 A_SetBlend("Blue", 0.50, 16)
		RFL1 C 0 A_PlaySound("QuadDamage/Use")
	    RFL1 C 0 A_SetPitch(pitch-0.50)
		RFL1 C 0 A_FireCustomMissile("RevXProjectileHalf",0,1,8)
		RFL1 C 1 Bright A_Light1
		RFL1 B 0 A_SetPitch(pitch+0.50)
		RFL1 B 1 A_Light0
		RFL1 A 1
		RFL1 A 0 A_ReFire
		Goto Ready
	QuadFire1Normal:
		TNT1 A 0 A_SetBlend("Blue", 0.50, 16)
		RFL1 C 0 A_PlaySound("QuadDamage/Use")
	    RFL1 C 0 A_SetPitch(pitch-0.50)
		RFL1 C 0 A_FireCustomMissile("RevXProjectile",0,1,8)
		RFL1 C 1 Bright A_Light1
		RFL1 B 0 A_SetPitch(pitch+0.50)
		RFL1 B 1 A_Light0
		RFL1 A 0 A_ReFire
		Goto Ready
	CoolantFire:
		RFL2 C 0 A_JumpIfInventory("RevXUpgrade2", 1, "SuperFire")
		RFL2 C 0 A_JumpIfInventory("RevXAmmo", 50, "CoolantFireNormal")
		RFL2 C 0 A_JumpIfInventory("RevXAmmo", 25, "CoolantFireHalf")
		RFL2 C 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire2")
	    RFL2 C 0 A_SetPitch(pitch-0.50)
		RFL2 C 0 A_FireCustomMissile("RevXProjectileQuarter",0,1,8)
		RFL2 C 1 Bright A_Light1
		RFL2 B 0 A_SetPitch(pitch+0.50)
		RFL2 B 1 A_Light0
		RFL2 A 2
		RFL2 A 0 A_ReFire
		Goto Ready
	CoolantFireHalf:
		RFL2 C 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire2Half")
	    RFL2 C 0 A_SetPitch(pitch-0.50)
		RFL2 C 0 A_FireCustomMissile("RevXProjectileHalf",0,1,8)
		RFL2 C 1 Bright A_Light1
		RFL2 B 0 A_SetPitch(pitch+0.50)
		RFL2 B 1 A_Light0
		RFL2 A 1
		RFL2 A 0 A_ReFire
		Goto Ready
	CoolantFireNormal:
		RFL2 C 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire2Normal")
	    RFL2 C 0 A_SetPitch(pitch-0.50)
		RFL2 C 0 A_FireCustomMissile("RevXProjectile",0,1,8)
		RFL2 C 1 Bright A_Light1
		RFL2 B 0 A_SetPitch(pitch+0.50)
		RFL2 B 1 A_Light0
		RFL2 A 0 A_ReFire
		Goto Ready
	QuadFire2:
		TNT1 A 0 A_SetBlend("Blue", 0.50, 16)
		RFL2 C 0 A_PlaySound("QuadDamage/Use")
	    RFL2 C 0 A_SetPitch(pitch-0.50)
		RFL2 C 0 A_FireCustomMissile("RevXProjectileQuarter",0,1,8)
		RFL2 C 1 Bright A_Light1
		RFL2 B 0 A_SetPitch(pitch+0.50)
		RFL2 B 1 A_Light0
		RFL2 A 2
		RFL2 A 0 A_ReFire
		Goto Ready
	QuadFire2Half:
		TNT1 A 0 A_SetBlend("Blue", 0.50, 16)
		RFL2 C 0 A_PlaySound("QuadDamage/Use")
	    RFL2 C 0 A_SetPitch(pitch-0.50)
		RFL2 C 0 A_FireCustomMissile("RevXProjectileHalf",0,1,8)
		RFL2 C 1 Bright A_Light1
		RFL2 B 0 A_SetPitch(pitch+0.50)
		RFL2 B 1 A_Light0
		RFL2 A 1
		RFL2 A 0 A_ReFire
		Goto Ready
	QuadFire2Normal:
		TNT1 A 0 A_SetBlend("Blue", 0.50, 16)
		RFL2 C 0 A_PlaySound("QuadDamage/Use")
	    RFL2 C 0 A_SetPitch(pitch-0.50)
		RFL2 C 0 A_FireCustomMissile("RevXProjectile",0,1,8)
		RFL2 C 1 Bright A_Light1
		RFL2 B 0 A_SetPitch(pitch+0.50)
		RFL2 B 1 A_Light0
		RFL2 A 0 A_ReFire
		Goto Ready
	BarrelFire:
		RFL3 C 0 A_JumpIfInventory("RevXAmmo", 50, "BarrelFireNormal")
		RFL3 C 0 A_JumpIfInventory("RevXAmmo", 25, "BarrelFireHalf")
		RFL3 C 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire3")
	    RFL3 C 0 A_SetPitch(pitch-0.50)
		RFL3 C 0 A_FireCustomMissile("SuperRevXProjectileQuarter",0,1,8)
		RFL3 C 1 Bright A_Light1
		RFL3 B 0 A_SetPitch(pitch+0.50)
		RFL3 B 1 A_Light0
		RFL3 A 2
		RFL3 A 0 A_ReFire
		Goto Ready
	BarrelFireHalf:
		RFL3 C 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire3Half")
	    RFL3 C 0 A_SetPitch(pitch-0.50)
		RFL3 C 0 A_FireCustomMissile("SuperRevXProjectileHalf",0,1,8)
		RFL3 C 1 Bright A_Light1
		RFL3 B 0 A_SetPitch(pitch+0.50)
		RFL3 B 1 A_Light0
		RFL3 A 1
		RFL3 A 0 A_ReFire
		Goto Ready
	BarrelFireNormal:
		RFL3 C 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire3Normal")
	    RFL3 C 0 A_SetPitch(pitch-0.50)
		RFL3 C 0 A_FireCustomMissile("SuperRevXProjectile",0,1,8)
		RFL3 C 1 Bright A_Light1
		RFL3 B 0 A_SetPitch(pitch+0.50)
		RFL3 B 1 A_Light0
		RFL3 A 0 A_ReFire
		Goto Ready
	QuadFire3:
		TNT1 A 0 A_SetBlend("Blue", 0.50, 16)
		RFL3 C 0 A_PlaySound("QuadDamage/Use")
	    RFL3 C 0 A_SetPitch(pitch-0.50)
		RFL3 C 0 A_FireCustomMissile("SuperRevXProjectileQuarter",0,1,8)
		RFL3 C 1 Bright A_Light1
		RFL3 B 0 A_SetPitch(pitch+0.50)
		RFL3 B 1 A_Light0
		RFL3 A 2
		RFL3 A 0 A_ReFire
		Goto Ready
	QuadFire3Half:
		TNT1 A 0 A_SetBlend("Blue", 0.50, 16)
		RFL3 C 0 A_PlaySound("QuadDamage/Use")
	    RFL3 C 0 A_SetPitch(pitch-0.50)
		RFL3 C 0 A_FireCustomMissile("SuperRevXProjectileHalf",0,1,8)
		RFL3 C 1 Bright A_Light1
		RFL3 B 0 A_SetPitch(pitch+0.50)
		RFL3 B 1 A_Light0
		RFL3 A 1
		RFL3 A 0 A_ReFire
		Goto Ready
	QuadFire3Normal:
		TNT1 A 0 A_SetBlend("Blue", 0.50, 16)
		RFL3 C 0 A_PlaySound("QuadDamage/Use")
	    RFL3 C 0 A_SetPitch(pitch-0.50)
		RFL3 C 0 A_FireCustomMissile("SuperRevXProjectile",0,1,8)
		RFL3 C 1 Bright A_Light1
		RFL3 B 0 A_SetPitch(pitch+0.50)
		RFL3 B 1 A_Light0
		RFL3 A 0 A_ReFire
		Goto Ready
	SuperFire:
		RFL4 C 0 A_JumpIfInventory("RevXAmmo", 50, "SuperFireNormal")
		RFL4 C 0 A_JumpIfInventory("RevXAmmo", 25, "SuperFireHalf")
		RFL4 C 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire4")
	    RFL4 C 0 A_SetPitch(pitch-0.50)
		RFL4 C 0 A_FireCustomMissile("SuperRevXProjectileQuarter",0,1,8)
		RFL4 C 1 Bright A_Light1
		RFL4 B 0 A_SetPitch(pitch+0.50)
		RFL4 B 1 A_Light0
		RFL4 A 2
		RFL4 A 0 A_ReFire
		Goto Ready
	SuperFireHalf:
		RFL4 C 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire4Half")
	    RFL4 C 0 A_SetPitch(pitch-0.50)
		RFL4 C 0 A_FireCustomMissile("SuperRevXProjectileHalf",0,1,8)
		RFL4 C 1 Bright A_Light1
		RFL4 B 0 A_SetPitch(pitch+0.50)
		RFL4 B 1 A_Light0
		RFL4 A 1
		RFL4 A 0 A_ReFire
		Goto Ready
	SuperFireNormal:
		RFL4 C 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire4Normal")
	    RFL4 C 0 A_SetPitch(pitch-0.50)
		RFL4 C 0 A_FireCustomMissile("SuperRevXProjectile",0,1,8)
		RFL4 C 1 Bright A_Light1
		RFL4 B 0 A_SetPitch(pitch+0.50)
		RFL4 B 1 A_Light0
		RFL4 A 0 A_ReFire
		Goto Ready
	QuadFire4:
		TNT1 A 0 A_SetBlend("Blue", 0.50, 16)
		RFL4 C 0 A_PlaySound("QuadDamage/Use")
	    RFL4 C 0 A_SetPitch(pitch-0.50)
		RFL4 C 0 A_FireCustomMissile("SuperRevXProjectileQuarter",0,1,8)
		RFL4 C 1 Bright A_Light1
		RFL4 B 0 A_SetPitch(pitch+0.50)
		RFL4 B 1 A_Light0
		RFL4 A 2
		RFL4 A 0 A_ReFire
		Goto Ready
	QuadFire4Half:
		TNT1 A 0 A_SetBlend("Blue", 0.50, 16)
		RFL4 C 0 A_PlaySound("QuadDamage/Use")
	    RFL4 C 0 A_SetPitch(pitch-0.50)
		RFL4 C 0 A_FireCustomMissile("SuperRevXProjectileHalf",0,1,8)
		RFL4 C 1 Bright A_Light1
		RFL4 B 0 A_SetPitch(pitch+0.50)
		RFL4 B 1 A_Light0
		RFL4 A 1
		RFL4 A 0 A_ReFire
		Goto Ready
	QuadFire4Normal:
		TNT1 A 0 A_SetBlend("Blue", 0.50, 16)
		RFL4 C 0 A_PlaySound("QuadDamage/Use")
	    RFL4 C 0 A_SetPitch(pitch-0.50)
		RFL4 C 0 A_FireCustomMissile("SuperRevXProjectile",0,1,8)
		RFL4 C 1 Bright A_Light1
		RFL4 B 0 A_SetPitch(pitch+0.50)
		RFL4 B 1 A_Light0
		RFL4 A 0 A_ReFire
		Goto Ready
	}
}

ACTOR RevXProjectile : DoomImpBall
{
	Radius 6
	Height 8
	Speed 40
	FastSpeed 40
	Damage 10
	Projectile
	+RANDOMIZE
	SeeSound "RevX/Fire"
	DeathSound ""
	Decal "BulletChip"
	DamageType "Basic"
	Obituary "%o got a load of %k's Rev-X."
	States
	{
		Spawn:
			RFBT A 1 BRIGHT
			Loop
		Death:
			TNT1 A 0
			Stop
	}
}

ACTOR RevXProjectileHalf : RevXProjectile
{
	Damage 5
}

ACTOR RevXProjectileQuarter : RevXProjectile
{
	Damage 3
}

ACTOR SuperRevXProjectile : RevXProjectile
{
	Damage 20
	States
	{
		Spawn:
			RFBT B 1 BRIGHT
			Loop
	}
}

ACTOR SuperRevXProjectileHalf : SuperRevXProjectile
{
	Damage 10
}

ACTOR SuperRevXProjectileQuarter : SuperRevXProjectile
{
	Damage 5
}

ACTOR RevXAmmo : Ammo
{
  Inventory.PickupMessage "You shouldn't be able to see this!"
  Inventory.Amount 0
  Inventory.MaxAmount 100
  Ammo.BackpackAmount 0
  Ammo.BackpackMaxAmount 100
  Inventory.PickupSound "cell/get1"
  Inventory.Icon "RIFLA0"
  States
  {
  Spawn:
    CELL A -1
    Stop
  }
}

Actor RevXUpgrade1 : Inventory //Increases recharge speed
{
	Inventory.PickupMessage "You got the ''Rev-X'' Rapid Fire Coolant!\n\c[white](Rev-X has been upgraded! Battery recharge increased!)"
	Inventory.PickupSound "revx/upgrade"
	Scale 0.75
	States
	{
	Spawn:
		RFUG A 1
		Loop
	}
}

Actor RevXUpgrade2 : Inventory //Increases attack damage
{
	Inventory.PickupMessage "You got the ''Rev-X'' Plasma Pulse Energiser!\n\c[white](Rev-X has been upgraded! Attack damage increased!)"
	Inventory.PickupSound "revx/upgrade"
	Scale 0.75
	States
	{
	Spawn:
		RFUG B 1
		Loop
	}
}