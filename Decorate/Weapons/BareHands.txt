Actor ReadyToCombo : Inventory {}
Actor AlwaysCombo : Inventory {}

Actor GMIDFist : Fist Replaces Fist
{
	Weapon.BobRangeX 0.3
	Weapon.BobRangeY 0.5
	Weapon.BobStyle InverseSmooth
	Weapon.BobSpeed 2.0
	Tag "$TAG_FISTS"
	Inventory.PickupMessage "Thou shalt not see this."
	Obituary "$OB_FISTS"
    +WEAPON.NOALERT
	+WEAPON.NOAUTOFIRE
	Weapon.UpSound "knuckled"
	Inventory.Icon "GLOVA0"
	states
	{
		Ready:
			TNT1 A 0 A_JumpIfInventory("ReadyToCombo",1,"ComboReady")
			FIST A 1 A_WeaponReady
			loop
		ComboReady:
			FIST A 0 A_GiveInventory("AlwaysCombo",1)
			FIST AAAABBBBCCCCDDDDAAAABBBBCCCCDDDDAAAABBBBCCCCDDDDAAAABBBBCCCCDDDD 1 A_WeaponReady
			FIST A 0 A_TakeInventory("AlwaysCombo",0)
			FIST A 0 A_TakeInventory("ReadyToCombo",0)
			Goto Ready
		Fire:
			TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("MeleeInputCheck",0,0,0,0) == 789,"ForceUppercut")
			TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("MeleeInputCheck",0,0,0,0) == 456,"Hook1")
			TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("MeleeInputCheck",0,0,0,0) == 123,"Hook2")
			TNT1 A 0 A_JumpIfInventory("AlwaysCombo",1,"ForcedWomboCombo")
			TNT1 A 0 A_JumpIfInventory("ReadyToCombo",1,"WomboCombo")
			TNT1 A 0 A_Jump(256, "Fist1", "Fist2")
			Goto Fist1
		WomboCombo:
			TNT1 A 0 A_GunFlash("NullFlash")
			TNT1 A 0 A_Jump(96, "Haymaker1", "Haymaker2", "Uppercut1", "Uppercut2", "Hook1", "Hook2")
			TNT1 A 0 A_Jump(256, "Fist1", "Fist2")
			Goto Fist1
		ForcedWomboCombo:
			TNT1 A 0 A_GunFlash("NullFlash")
			TNT1 A 0 A_TakeInventory("AlwaysCombo",0)
			TNT1 A 0 A_Jump(256, "Haymaker1", "Haymaker2", "Uppercut1", "Uppercut2", "Hook1", "Hook2")
			Goto Haymaker1
		Fist1:
			TNT1 A 0 A_GunFlash("LFistStay")
			TNT1 A 0 A_PlaySound("fist/normalthrow", CHAN_AUTO)
			FIS1 BC 1 A_WeaponReady(WRF_NoSwitch)
			FIS1 E 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire1")
			FIS1 E 0 A_JumpIfInventory("PowerDoubleDamage", 1, "DoubleFire1")
			Goto ContinueFire1
		QuadFire1:
			TNT1 A 0 A_SetBlend("Blue", 0.25, 16)
			TNT1 A 0 A_PlaySound("QuadDamage/Use")
			Goto ContinueFire1
		DoubleFire1:
			TNT1 A 0 A_SetBlend("Red", 0.25, 16)
			TNT1 A 0 A_PlaySound("DoubleDamage/Use")
		ContinueFire1:
			FIS1 E 0 A_CustomPunch(2,0,0,"FistPuff")
			FIS1 E 0 A_GiveInventory("ReadyToCombo",1)
			FIS1 EFEDCBA 1 A_WeaponReady(WRF_NoSwitch)
			FIS1 A 0 A_TakeInventory("ReadyToCombo",0)
			Goto Ready
		Fist2:
			TNT1 A 0 A_GunFlash("RFistStay")
			TNT1 A 0 A_PlaySound("fist/normalthrow", CHAN_AUTO)
			FIS2 BC 1 A_WeaponReady(WRF_NoSwitch)
			FIS2 E 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire2")
			FIS2 E 0 A_JumpIfInventory("PowerDoubleDamage", 1, "DoubleFire2")
			Goto ContinueFire2
		QuadFire2:
			TNT1 A 0 A_SetBlend("Blue", 0.25, 16)
			TNT1 A 0 A_PlaySound("QuadDamage/Use")
			Goto ContinueFire2
		DoubleFire2:
			TNT1 A 0 A_SetBlend("Red", 0.25, 16)
			TNT1 A 0 A_PlaySound("DoubleDamage/Use")
		ContinueFire2:
			FIS2 E 0 A_CustomPunch(2,0,0,"FistPuff")
			FIS2 E 0 A_GiveInventory("ReadyToCombo",1)
			FIS2 EFEDCBA 1 A_WeaponReady(WRF_NoSwitch)
			FIS2 A 0 A_TakeInventory("ReadyToCombo",0)
			Goto Ready
		LFistStay:
			FIS2 A 9
			Stop
		RFistStay:
			FIS1 A 9
			Stop
		NullFlash:
			TNT1 A 1
			Stop
		Haymaker1:
			FISD ABCD 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			TNT1 A 1
			TNT1 A 0 A_PlaySound("fist/haymaker", CHAN_AUTO)
			HAY1 A 0 A_SetAngle(angle+1)
			HAY1 A 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY1 D 0 A_SetAngle(angle+1)
			HAY1 D 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			FIS1 E 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire3")
			FIS1 E 0 A_JumpIfInventory("PowerDoubleDamage", 1, "DoubleFire3")
			Goto ContinueFire3
		QuadFire3:
			TNT1 A 0 A_SetBlend("Blue", 0.25, 16)
			TNT1 A 0 A_PlaySound("QuadDamage/Use")
			Goto ContinueFire3
		DoubleFire3:
			TNT1 A 0 A_SetBlend("Red", 0.25, 16)
			TNT1 A 0 A_PlaySound("DoubleDamage/Use")
		ContinueFire3:
			HAY1 G 0 A_CustomPunch(7,0,0,"BigFistPuff")
			HAY1 G 0 A_SetAngle(angle-0.2)
			HAY1 G 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY1 I 0 A_SetAngle(angle-0.2)
			HAY1 I 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY1 H 0 A_SetAngle(angle-0.2)
			HAY1 H 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY1 G 0 A_SetAngle(angle-0.2)
			HAY1 G 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY1 F 0 A_SetAngle(angle-0.2)
			HAY1 F 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY1 E 0 A_SetAngle(angle-0.2)
			HAY1 E 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY1 D 0 A_SetAngle(angle-0.2)
			HAY1 D 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY1 C 0 A_SetAngle(angle-0.2)
			HAY1 C 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY1 B 0 A_SetAngle(angle-0.2)
			HAY1 B 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY1 A 0 A_SetAngle(angle-0.2)
			HAY1 A 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			TNT1 A 1 A_WeaponReady(WRF_NoSwitch)
			FISD DCBA 1 A_WeaponReady(WRF_NoSwitch)
			Goto ComboReady
		Haymaker2:
			FISD ABCD 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			TNT1 A 1
			TNT1 A 0 A_PlaySound("fist/haymaker", CHAN_AUTO)
			HAY2 A 0 A_SetAngle(angle-1)
			HAY2 A 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY2 D 0 A_SetAngle(angle-1)
			HAY2 D 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			FIS1 E 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire4")
			FIS1 E 0 A_JumpIfInventory("PowerDoubleDamage", 1, "DoubleFire4")
			Goto ContinueFire4
		QuadFire4:
			TNT1 A 0 A_SetBlend("Blue", 0.25, 16)
			TNT1 A 0 A_PlaySound("QuadDamage/Use")
			Goto ContinueFire4
		DoubleFire4:
			TNT1 A 0 A_SetBlend("Red", 0.25, 16)
			TNT1 A 0 A_PlaySound("DoubleDamage/Use")
		ContinueFire4:
			HAY2 G 0 A_CustomPunch(7,0,0,"BigFistPuff")
			HAY2 G 0 A_SetAngle(angle+0.2)
			HAY2 G 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY2 I 0 A_SetAngle(angle+0.2)
			HAY2 I 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY2 H 0 A_SetAngle(angle+0.2)
			HAY2 H 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY2 G 0 A_SetAngle(angle+0.2)
			HAY2 G 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY2 F 0 A_SetAngle(angle+0.2)
			HAY2 F 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY2 E 0 A_SetAngle(angle+0.2)
			HAY2 E 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY2 D 0 A_SetAngle(angle+0.2)
			HAY2 D 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY2 C 0 A_SetAngle(angle+0.2)
			HAY2 C 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY2 B 0 A_SetAngle(angle+0.2)
			HAY2 B 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HAY2 A 0 A_SetAngle(angle+0.2)
			HAY2 A 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			TNT1 A 1 A_WeaponReady(WRF_NoSwitch)
			FISD DCBA 1 A_WeaponReady(WRF_NoSwitch)
			Goto ComboReady
		ForceUppercut:
			TNT1 A 0 A_GiveInventory("ReadyToCombo",1)
			TNT1 A 0 A_Jump(256, "Uppercut1", "Uppercut2")
		Uppercut1:
			TNT1 A 0 A_PlaySound("fist/foley", CHAN_AUTO)
			TNT1 A 0 A_GunFlash("Charge1")
			TNT1 AAAAAAAAA 1 A_SetPitch(pitch+0.54)
			TNT1 A 0 A_PlaySound("fist/uppercut", CHAN_AUTO)
			TNT1 AAA 1 A_SetPitch(pitch-1.62)
			UPR1 A 0 A_SetPitch(pitch-1)
			UPR1 A 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR1 D 0 A_SetPitch(pitch-1)
			UPR1 D 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			FIS1 E 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire5")
			FIS1 E 0 A_JumpIfInventory("PowerDoubleDamage", 1, "DoubleFire5")
			Goto ContinueFire5
		QuadFire5:
			TNT1 A 0 A_SetBlend("Blue", 0.25, 16)
			TNT1 A 0 A_PlaySound("QuadDamage/Use")
			Goto ContinueFire5
		DoubleFire5:
			TNT1 A 0 A_SetBlend("Red", 0.25, 16)
			TNT1 A 0 A_PlaySound("DoubleDamage/Use")
		ContinueFire5:
			UPR1 G 0 A_CustomPunch(25,0,0,"UppercutPuff")
			UPR1 G 0 A_CustomPunch(25,0,0,"UppercutPuff")
			UPR1 G 0 A_SetPitch(pitch+0.2)
			UPR1 G 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR1 J 0 A_SetPitch(pitch+0.2)
			UPR1 J 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR1 H 0 A_SetPitch(pitch+0.2)
			UPR1 H 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR1 G 0 A_SetPitch(pitch+0.2)
			UPR1 G 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR1 E 0 A_SetPitch(pitch+0.2)
			UPR1 E 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR1 D 0 A_SetPitch(pitch+0.2)
			UPR1 D 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR1 C 0 A_SetPitch(pitch+0.2)
			UPR1 C 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR1 B 0 A_SetPitch(pitch+0.2)
			UPR1 B 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR1 A 0 A_SetPitch(pitch+0.2)
			UPR1 A 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			TNT1 A 0 A_SetPitch(pitch+0.2)
			TNT1 A 1 A_WeaponReady(WRF_NoSwitch)
			FISD DCBA 1 A_WeaponReady(WRF_NoSwitch)
			Goto ComboReady
		Uppercut2:
			TNT1 A 0 A_PlaySound("fist/foley", CHAN_AUTO)
			TNT1 A 0 A_GunFlash("Charge2")
			TNT1 AAAAAAAAA 1 A_SetPitch(pitch+0.54)
			TNT1 A 0 A_PlaySound("fist/uppercut", CHAN_AUTO)
			TNT1 AAA 1 A_SetPitch(pitch-1.62)
			UPR2 A 0 A_SetPitch(pitch-1)
			UPR2 A 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR2 D 0 A_SetPitch(pitch-1)
			UPR2 D 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			FIS1 E 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire6")
			FIS1 E 0 A_JumpIfInventory("PowerDoubleDamage", 1, "DoubleFire6")
			Goto ContinueFire6
		QuadFire6:
			TNT1 A 0 A_SetBlend("Blue", 0.25, 16)
			TNT1 A 0 A_PlaySound("QuadDamage/Use")
			Goto ContinueFire6
		DoubleFire6:
			TNT1 A 0 A_SetBlend("Red", 0.25, 16)
			TNT1 A 0 A_PlaySound("DoubleDamage/Use")
		ContinueFire6:
			UPR2 G 0 A_CustomPunch(25,0,0,"UppercutPuff")
			UPR2 G 0 A_SetPitch(pitch+0.2)
			UPR2 G 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR2 J 0 A_SetPitch(pitch+0.2)
			UPR2 J 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR2 H 0 A_SetPitch(pitch+0.2)
			UPR2 H 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR2 G 0 A_SetPitch(pitch+0.2)
			UPR2 G 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR2 E 0 A_SetPitch(pitch+0.2)
			UPR2 E 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR2 D 0 A_SetPitch(pitch+0.2)
			UPR2 D 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR2 C 0 A_SetPitch(pitch+0.2)
			UPR2 C 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR2 B 0 A_SetPitch(pitch+0.2)
			UPR2 B 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			UPR2 A 0 A_SetPitch(pitch+0.2)
			UPR2 A 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			TNT1 A 0 A_SetPitch(pitch+0.2)
			TNT1 A 1 A_WeaponReady(WRF_NoSwitch)
			FISD DCBA 1 A_WeaponReady(WRF_NoSwitch)
			Goto ComboReady
		Hook1:
			TNT1 A 0 A_GiveInventory("ReadyToCombo",1)
			TNT1 A 0 A_PlaySound("fist/foley", CHAN_AUTO)
			TNT1 A 0 A_GunFlash("Charge1")
			TNT1 AAAAAAAAA 1 A_SetAngle(angle-0.54)
			TNT1 AAA 1 A_SetAngle(angle+1.62)
			TNT1 A 0 A_PlaySound("fist/haymaker", CHAN_AUTO)
			HOK1 A 0 A_SetAngle(angle+1)
			HOK1 A 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK1 B 0 A_SetAngle(angle+1)
			HOK1 B 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK1 C 0 A_SetAngle(angle+1)
			HOK1 C 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK1 D 0 A_SetAngle(angle+1)
			HOK1 D 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			FIS1 E 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire7")
			FIS1 E 0 A_JumpIfInventory("PowerDoubleDamage", 1, "DoubleFire7")
			Goto ContinueFire7
		QuadFire7:
			TNT1 A 0 A_SetBlend("Blue", 0.25, 16)
			TNT1 A 0 A_PlaySound("QuadDamage/Use")
			Goto ContinueFire7
		DoubleFire7:
			TNT1 A 0 A_SetBlend("Red", 0.25, 16)
			TNT1 A 0 A_PlaySound("DoubleDamage/Use")
		ContinueFire7:
			HOK1 E 0 A_CustomPunch(12,0,0,"BigFistPuff")
			HOK1 F 0 A_SetAngle(angle-0.5)
			HOK1 F 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK1 G 0 A_SetAngle(angle-0.5)
			HOK1 G 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK1 H 0 A_SetAngle(angle-0.5)
			HOK1 H 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK1 I 0 A_SetAngle(angle-0.5)
			HOK1 I 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK1 J 0 A_SetAngle(angle-0.5)
			HOK1 J 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK1 K 0 A_SetAngle(angle-0.5)
			HOK1 K 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK1 L 0 A_SetAngle(angle-0.5)
			HOK1 L 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK1 M 0 A_SetAngle(angle-0.5)
			HOK1 M 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			TNT1 A 1 A_WeaponReady(WRF_NoSwitch)
			FISD DCBA 1 A_WeaponReady(WRF_NoSwitch)
			Goto ComboReady
		Hook2:
			TNT1 A 0 A_GiveInventory("ReadyToCombo",1)
			TNT1 A 0 A_PlaySound("fist/foley", CHAN_AUTO)
			TNT1 A 0 A_GunFlash("Charge2")
			TNT1 AAAAAAAAA 1 A_SetAngle(angle+0.54)
			TNT1 AAA 1 A_SetAngle(angle-1.62)
			TNT1 A 0 A_PlaySound("fist/haymaker", CHAN_AUTO)
			HOK2 A 0 A_SetAngle(angle-1)
			HOK2 A 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK2 B 0 A_SetAngle(angle-1)
			HOK2 B 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK2 C 0 A_SetAngle(angle-1)
			HOK2 C 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK2 D 0 A_SetAngle(angle-1)
			HOK2 D 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			FIS1 E 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire8")
			FIS1 E 0 A_JumpIfInventory("PowerDoubleDamage", 1, "DoubleFire8")
			Goto ContinueFire8
		QuadFire8:
			TNT1 A 0 A_SetBlend("Blue", 0.25, 16)
			TNT1 A 0 A_PlaySound("QuadDamage/Use")
			Goto ContinueFire8
		DoubleFire8:
			TNT1 A 0 A_SetBlend("Red", 0.25, 16)
			TNT1 A 0 A_PlaySound("DoubleDamage/Use")
		ContinueFire8:
			HOK2 E 0 A_CustomPunch(12,0,0,"BigFistPuff")
			HOK2 F 0 A_SetAngle(angle+0.5)
			HOK2 F 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK2 G 0 A_SetAngle(angle+0.5)
			HOK2 G 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK2 H 0 A_SetAngle(angle+0.5)
			HOK2 H 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK2 I 0 A_SetAngle(angle+0.5)
			HOK2 I 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK2 J 0 A_SetAngle(angle+0.5)
			HOK2 J 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK2 K 0 A_SetAngle(angle+0.5)
			HOK2 K 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK2 L 0 A_SetAngle(angle+0.5)
			HOK2 L 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			HOK2 M 0 A_SetAngle(angle+0.5)
			HOK2 M 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
			TNT1 A 1 A_WeaponReady(WRF_NoSwitch)
			FISD DCBA 1 A_WeaponReady(WRF_NoSwitch)
			Goto ComboReady
		Charge1:
			FCH1 ABCDEFGHIJKLMN 1
			Stop
		Charge2:
			FCH2 ABCDEFGHIJKLMN 1
			Stop
  AltFire:
	TNT1 A 0 A_JumpIfInventory("ReadyToCombo",1,"ComboKick")
	TNT1 A 0 A_GunFlash("WeaponStill")
	TNT1 A 0 A_PlaySound ("weapons/KICK",CHAN_WEAPON)
	FOOT AB 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	FOOT C 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	FOOT D 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	FOOT D 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadKick")
	FOOT D 0 A_JumpIfInventory("PowerDoubleDamage", 1, "DoubleKick")
	Goto ContinueKick
  QuadKick:
	TNT1 A 0 A_SetBlend("Blue", 0.25, 16)
	FOOT D 0 A_PlaySound("QuadDamage/Use",CHAN_7)
	Goto ContinueKick
  DoubleKick:
	TNT1 A 0 A_SetBlend("Red", 0.25, 16)
	FOOT D 0 A_PlaySound("DoubleDamage/Use",CHAN_7)
  ContinueKick:
	FOOT D 0 A_CustomPunch(5,0,0,"KickPuff")
	FOOT D 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	FOOT D 0 A_Quake(1,2,0,10,"")
	FOOT EF 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	FOOT FEDCBA 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	TNT1 A 8 A_WeaponReady(WRF_NoFire)
	TNT1 A 0 A_ReFire
	Goto Ready
  ComboKick:
	TNT1 A 0 A_GunFlash("QuickWeaponStill")
	TNT1 A 0 A_PlaySound ("weapons/KICK",CHAN_WEAPON)
	TNT1 A 0 A_Jump(256, "ComboKick1", "ComboKick2")
  ComboKick1:
	FOT1 ABC 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	FOT1 D 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadKick1")
	FOT1 D 0 A_JumpIfInventory("PowerDoubleDamage", 1, "DoubleKick1")
	Goto ContinueKick1
  QuadKick1:
	TNT1 A 0 A_SetBlend("Blue", 0.25, 16)
	FOOT D 0 A_PlaySound("QuadDamage/Use",CHAN_7)
	Goto ContinueKick1
  DoubleKick1:
	TNT1 A 0 A_SetBlend("Red", 0.25, 16)
	FOOT D 0 A_PlaySound("DoubleDamage/Use",CHAN_7)
  ContinueKick1:
	FOT1 D 0 A_CustomPunch(5,0,0,"KickPuff")
	FOT1 D 0 A_Quake(1,2,0,10,"")
	FOT1 DDEEAA 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	TNT1 AAAA 1 A_WeaponReady
	Goto Ready
  ComboKick2:
	FOT2 ABC 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	FOT2 D 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadKick2")
	FOT2 D 0 A_JumpIfInventory("PowerDoubleDamage", 1, "DoubleKick2")
	Goto ContinueKick2
  QuadKick2:
	TNT1 A 0 A_SetBlend("Blue", 0.25, 16)
	FOOT D 0 A_PlaySound("QuadDamage/Use",CHAN_7)
	Goto ContinueKick2
  DoubleKick2:
	TNT1 A 0 A_SetBlend("Red", 0.25, 16)
	FOOT D 0 A_PlaySound("DoubleDamage/Use",CHAN_7)
  ContinueKick2:
	FOT2 D 0 A_CustomPunch(5,0,0,"KickPuff")
	FOT2 D 0 A_Quake(1,2,0,10,"")
	FOT2 DDEEAA 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	TNT1 AAAA 1 A_WeaponReady
	Goto Ready
		WeaponStill:
			FIST A 22
			Goto LightDone
		QuickWeaponStill:
			FISD ABC 1
			FISD D 7
			FISD CBA 1
			Goto LightDone
		Deselect:
			FIST A 0 A_TakeInventory("AlwaysCombo",0)
			FIST A 0 A_TakeInventory("ReadyToCombo",0)
			FIST A 1 A_Lower
			FIST A 0 A_Lower
			Loop
		Select:
			FIST A 1 A_Raise
			FIST A 0 A_Raise
			Loop
		}
}

actor FistPuff
{
  +NOBLOCKMAP
  +NOGRAVITY
  +PUFFONACTORS
  +BLOODLESSIMPACT
  activesound ""
  attacksound "Fist/Hit"
  seesound "Fist/Hit"
  DamageType "Fist"
  states
  {
  Spawn:
    TNT1 A 0
    TNT1 A 1
    stop
  Crash:
     TNT1 A 0
     TNT1 A 1
     stop
  Melee:
     TNT1 A 0
     TNT1 A 1
     stop
  }
}

actor BigFistPuff : FistPuff
{
  attacksound "Fist/BigHit"
  seesound "Fist/BigHit"
  DamageType "BigFist"
}

actor UppercutPuff : BigFistPuff
{
  seesound "Fist/UppercutHit"
  DamageType "Uppercut"
}