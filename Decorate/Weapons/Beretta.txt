Actor BerettaShotCount : Inventory
{
  Inventory.MaxAmount 15
}

Actor GMIDPistol : Pistol Replaces Pistol
{
	Weapon.BobRangeX 0.3
	Weapon.BobRangeY 0.5
	Weapon.BobStyle InverseSmooth
	Weapon.BobSpeed 2.0
	Weapon.UpSound "pistup"
	attacksound ""
	Weapon.AmmoType "Clip2"
	Weapon.AmmoUse 1
	Tag "$TAG_BERETTA"
	Scale 0.5
	+WEAPON.NOALERT
	Inventory.PickupMessage "$GOTBERETTA"
	Obituary "$OB_BERETTA"
	Inventory.Icon "PISTA0"
	Weapon.SelectionOrder 1900
	states
	{
	Spawn:
	TNT1 A 0
	TNT1 A 0 A_Jump(128, "Spawn2")
	PIST A -1 
	Stop
	Spawn2:
	PIST C -1
	Stop
	Ready:
	TNT1 A 0 A_JumpIfInventory("StartingAnimation",1,"StartGame")
	PISG A 1 A_WeaponReady
	Loop
	Fire:
	PISG A 2 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	PISG A 0 A_AlertMonsters
	PISG A 0 A_GiveInventory("BerettaShotCount",1)
	PISG B 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadFire")
	PISG B 0 A_JumpIfInventory("PowerDoubleDamage", 1, "DoubleFire")
	Goto ContinueFire
	QuadFire:
	TNT1 A 0 A_SetBlend("Blue", 0.25, 16)
	PISG B 0 A_PlaySound("QuadDamage/Use")
	Goto ContinueFire
	DoubleFire:
	TNT1 A 0 A_SetBlend("Red", 0.25, 16)
	PISG B 0 A_PlaySound("DoubleDamage/Use")
	ContinueFire:
	PISG B 0 A_PlaySound("weapons/GMPISTOL", CHAN_WEAPON)
	PISG B 0 A_SetPitch(pitch-0.15)
	PISG B 0 A_FireBullets (5.6, 0, 1, 5, "XaserPuff")
    PISG B 0 A_FireCustomMissile("CasingSpawner",0,0,17,0)
	PISG B 0 A_Light1
	PISG B 1 Bright A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	PISG C 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	PISG D 0 A_SetPitch(pitch+0.15)
	PISG D 0 A_JumpIfInventory("BerettaShotCount",10,"Click")
	Goto ContinueFireMore
	Click:
	PISG E 0 A_PlaySound("pistol/low",CHAN_AUTO)
	Goto ContinueFireMore
	ContinueFireMore:
	PISG D 0 A_Light0
    PISG D 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	PISG A 0 A_CheckForReload(15, "CoolOff")
	TNT1 A 0 A_TakeInventory("BerettaShotCount",0)
	TNT1 A 0 A_CheckReload
	TNT1 A 0 A_Jump(1, "ReloadEasterEgg")
	TNT1 A 0 A_PlaySound("weapon/fiddle", CHAN_AUTO)
	BRLD ABCDEFGHIJ 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	BRLD K 0 A_PlaySound("pistol/reload1", CHAN_AUTO)
	BRLD KLMNOPQQQQQ 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	TNT1 A 0 A_PlaySound("weapon/fiddle", CHAN_AUTO)
	BRLD Q 1 Offset(0,35)
	BRLD Q 1 Offset(0,40)
	BRLD Q 1 Offset(0,50)
	BRLD Q 1 Offset(0,60)
	BRLD Q 1 Offset(0,70)
	BRLD Q 1 Offset(0,80)
	BRLD Q 1 Offset(0,90)
	BRLD Q 1 Offset(0,100)
	BRLD Q 1 Offset(0,110)
	TNT1 A 0 A_PlaySound("weapon/fiddle")
	BRLD R 1 Offset(0,110)
	BRLD R 1 Offset(0,100)
	BRLD R 1 Offset(0,90)
	BRLD R 1 Offset(0,80)
	BRLD R 1 Offset(0,70)
	BRLD R 1 Offset(0,60)
	BRLD R 1 Offset(0,50)
	BRLD R 1 Offset(0,40)
	BRLD R 1 Offset(0,35)
	BRLD R 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	BRLD S 0 A_PlaySound("pistol/reload2", CHAN_AUTO)
	BRLD STUVWW 2 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	BRLD X 0 A_PlaySound("pistol/reload3", CHAN_AUTO)
	BRLD XYYZ 3 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	BRLD A 0 A_ResetReloadCounter
	BRLD A 0 A_ReFire
	Goto Ready
	ReloadEasterEgg:
	PISG D 1 Offset(0,35)
	PISG D 1 Offset(0,45)
	PISG D 1 Offset(0,55)
	PISG D 1 Offset(0,65)
	PISG D 1 Offset(0,75)
	PISG D 1 Offset(0,85)
	PISG D 1 Offset(0,95)
	PISG D 1 Offset(0,105)
	PISG D 1 Offset(0,115)
	TNT1 A 10 A_PlaySound("pistol/reloadalt", CHAN_AUTO)
	PISG A 1 Offset(0,115)
	PISG A 1 Offset(0,105)
	PISG A 1 Offset(0,95)
	PISG A 1 Offset(0,85)
	PISG A 1 Offset(0,75)
	PISG A 1 Offset(0,65)
	PISG A 1 Offset(0,55)
	PISG A 1 Offset(0,45)
	PISG A 1 Offset(0,35)
	Goto Ready
	CoolOff:
	PISG EF 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	PISG A 2 A_WeaponReady(WRF_NoSwitch)
	PISG A 3 A_WeaponReady(WRF_NoSwitch)
	Goto Ready
  Deselect:
    PISG A 1 A_Lower
    PISG A 0 A_Lower
    Loop
  Select:
    PISG A 1 A_Raise
    PISG A 0 A_Raise
    Loop
  StartGame: //Damn, those four-legged bastards are gonna pay for being cringy as fuck.
	TNT1 A 0 A_TakeInventory("StartingAnimation",0)
	TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("PVPCheck",0,0,0,0) == 2,"AltStartGame")
	TNT1 A 0 A_JumpIf(CallACS("NoWarmUpAnimation")==1, "AltStartGame")
	TNT1 A 15 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	TNT1 A 0 A_JumpIf(CallACS("PlayerVocalizations")==0, "ContinueIntro")
	KNUX A 0 A_PlaySound("player/intro", CHAN_VOICE)
  ContinueIntro:
	KNUX ABC 2 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	KNUX A 0 A_PlaySound("knuckled")
	KNUX DDDCBA 2 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	KNX2 ABC 2 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	KNX2 A 0 A_PlaySound("knuckled")
	KNX2 DDDCBA 2 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	TNT1 A 20 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	P1FS A 0 A_PlaySound("pistol/cock")
	P1FS ABCDEFGHIJKLMNOPQ 2 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	Goto Ready
  AltStartGame:
	TNT1 A 0 A_JumpIf(CallACS("PlayerVocalizations")==0, "Ready")
	TNT1 A 0 A_PlaySound("player/intro", CHAN_VOICE)
	Goto Ready
  AltFire:
	TNT1 A 0 A_GunFlash("WeaponStill")
	TNT1 A 0 A_PlaySound ("weapons/KICK",CHAN_WEAPON)
	FOOT AB 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	FOOT C 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	FOOT D 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	FOOT D 0 A_JumpIfInventory("PowerQuadDamageST", 1, "QuadKick")
	FOOT D 0 A_JumpIfInventory("PowerDoubleDamage", 1, "DoubleKick")
	Goto ContinueKick
  QuadKick:
	TNT1 A 0 A_SetBlend("Blue", 0.25, 16)
	FOOT D 0 A_PlaySound("QuadDamage/Use",CHAN_7)
	Goto ContinueKick
  DoubleKick:
	TNT1 A 0 A_SetBlend("Red", 0.25, 16)
	FOOT D 0 A_PlaySound("DoubleDamage/Use",CHAN_7)
  ContinueKick:
	FOOT D 0 A_CustomPunch(5,0,0,"KickPuff")
	FOOT D 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	FOOT D 0 A_Quake(1,2,0,10,"")
	FOOT EF 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	FOOT FEDCBA 1 A_WeaponReady(WRF_NoFire|WRF_NoSwitch)
	TNT1 A 8 A_WeaponReady(WRF_NoFire)
	TNT1 A 0 A_ReFire
	Goto Ready
  WeaponStill:
	PISG A 22
	Goto LightDone
  }
}

Actor Clip2 : Ammo replaces GoldWandAmmo
{
	Scale .58
	+FLOORCLIP
	+DONTGIB
	Inventory.Amount 10
	Inventory.MaxAmount 200
	Ammo.BackpackAmount 10
	Ammo.BackpackMaxAmount 400
	Tag "$TAG_9MM1"
	Inventory.PickupSound "pistolmagazine/get"
	Inventory.Icon "PISAC0"
	Inventory.PickupMessage "$GOT9MM1"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(128, "Spawn2")
		PISA A -1 
		Stop
	Spawn2:
		PISA B -1
		Stop
	}
}

Actor Clip2_Used : Clip2 //This is here so that picking up a magazine from an enemy will display a different message
{
	Inventory.PickupMessage "$GOT9MM_USED"
}

Actor ClipBox2 : Clip2 replaces GoldWandHefty
{
	+FLOORCLIP
	+DONTGIB
	Scale 1.15
	Inventory.Amount 30
	Ammo.BackpackAmount 30
	Tag "$TAG_9MM2"
	Inventory.PickupSound "pistolbox/get"
	Inventory.Icon "PISAA0B0"
	Inventory.PickupMessage "$GOT9MM2"
	States
	{
	Spawn:
		BBOX A -1
		Stop
	}
}